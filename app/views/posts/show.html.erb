<div class="max-w-2xl mx-auto">
  <article class="bg-white overflow-hidden" data-controller="open-modal">
    <!-- Post Header -->
    <div class="flex items-center p-4">
      <%= link_to user_path(@post.user) do %>
        <%= render "components/avatar", user: @post.user, size: :md %>
      <% end %>
      <div class="ml-3">
        <%= link_to user_path(@post.user), class: "font-medium text-gray-800 hover:underline" do %>
          <%= @post.user.full_name %>
        <% end %>
        <p class="text-xs text-gray-500"><%= l @post.created_at, format: :long %></p>
      </div>
      <% if logged_in? && @post.user_id == current_user.id %>
        <div class="ml-auto">
          <%= link_to edit_post_path(@post), class: "text-blue-600 hover:underline text-sm" do %>
            <%= t("posts.edit") %>
          <% end %>
        </div>
      <% end %>
    </div>

    <!-- Post Image -->
    <% if @post.image.attached? %>
      <%= image_tag @post.image.variant(resize_to_limit: [800, 800]), class: "w-full" %>
    <% end %>

    <!-- Post Content -->
    <div class="p-4">
      <p class="text-gray-800 mb-4 text-lg"><%= @post.description %></p>

      <div class="mb-4">
        <%= render "components/post_details", post: @post, layout: :list %>
      </div>

      <!-- Like Button -->
      <%= render "likes/like_button", post: @post %>

      <!-- Comments Section -->
      <%= render "comments/comments_section", post: @post %>
    </div>
  </article>
</div>

<!-- Comments Modal -->
<%= render "components/modal", id: "comments-modal", title: t("comments.title"), padding: false do %>
  <div id="comments-modal-content" class="h-full flex flex-col overflow-hidden">
    <!-- Content loaded via JavaScript -->
  </div>
<% end %>

<!-- Likes Modal -->
<%= render "components/modal", id: "likes-modal", title: t("likes.liked_by") do %>
  <div id="likes-modal-content" class="overflow-y-auto">
    <!-- Content loaded via JavaScript -->
  </div>
<% end %>
